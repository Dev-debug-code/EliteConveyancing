<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Elite Conveyancing – Mortgage Offer Reader</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>

  <script src="https://cdn.jsdelivr.net/npm/marked@12.0.2/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">


  <link rel="stylesheet" href="styles.css">
</head>
<body class="d-flex flex-column min-vh-100 bg-light">


<nav class="navbar navbar-light bg-white shadow-sm position-relative px-3">
  <div class="container-fluid px-0 h-100">
    <!-- Logos positioned absolutely at top-left -->
    <div class="d-flex align-items-center position-absolute top-0 start-0 mt-2 ms-3">
      <img src="assets/EliteCon.png" alt="Elite Conveyancing" height="48">
      <div class="vr mx-3" style="height:40px; border-color: var(--primary-green);"></div>
      <img src="assets/timpson.jpeg" alt="Timpson" height="48">
    </div>
    
    <!-- Info icon positioned at center-right -->
    <div class="d-flex align-items-center position-absolute top-50 end-0 translate-middle-y me-3">
      <button type="button" class="btn btn-link p-2" data-bs-toggle="tooltip" data-bs-placement="left" 
              title="Upload a PDF mortgage document, click 'Initiate intelligent analytics' to extract data and generate a report. Click highlighted keywords to see source text locations.">
        <i class="fas fa-info-circle" style="color: var(--primary-green); font-size: 1.5rem;"></i>
      </button>
    </div>
    
    <!-- Bottom row: title text on left -->
    <div class="position-absolute bottom-0 start-0 ms-3 mb-2">
      <span id="navbarTitle" class="fw-bold" 
            style="font:300 1.4rem/1.25 'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; color: var(--primary-green);">
      </span>
    </div>
  </div>
</nav>

<header id="hero"
        class="flex-grow-1 d-flex flex-column justify-content-center align-items-center text-center border-dashed-drop">
  <h1 class="display-6 fw-bold mb-2">Mortgage Offer Insight</h1>
  <p class="lead mb-4 text-muted">Upload your lender PDF and review our automatically generated report.</p>
  <button id="uploadBtnHero" class="btn btn-primary btn-lg px-5 py-3">
    Select PDF file
  </button>
  <p class="small text-muted mt-2">or drop your PDF anywhere on this page</p>
  <input id="pdfInput" type="file" accept="application/pdf" hidden>
</header>


<section id="previewStage" class="container d-none py-4 text-center">

  <div class="ratio ratio-4x3 mx-auto" style="max-width:820px;">
    <embed id="previewEmbed" type="application/pdf">
  </div>

  <div class="mt-4 d-flex justify-content-center gap-3 flex-wrap">
    <button id="reselectBtn" class="btn btn-outline-secondary px-4">
      Choose another document
    </button>
    <button id="analyseBtn" class="btn btn-primary px-4">
      Initiate intelligent analytics
    </button>
  </div>
</section>


<main id="workspace" class="container-fluid d-none py-3">
  <div class="row g-3">

    <div class="col-12 col-lg-6">
      <div class="card h-100 shadow-sm">
        <div class="card-header fw-bold">Uploaded mortgage offer</div>
        <div class="card-body p-0 position-relative">
          <div id="renderedText" class="p-3 overflow-auto" style="height:65vh;"></div>
          <pre id="rawText" style="display:none"></pre>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-6">
      <div class="card h-100 shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
          <span>Response mortgage report</span>
          <button id="editToggle" class="btn btn-sm btn-outline-secondary">Edit</button>
        </div>
        <div id="report" class="card-body overflow-auto" style="height:65vh;"></div>
      </div>
    </div>
  </div>
  <div id="docControls" class="d-flex align-items-center gap-3 mt-2 d-none">
  <div id="pdfPreview" class="flex-shrink-0">
    <embed id="pdfEmbed" type="application/pdf">
  </div>

  <button id="downloadBtn" class="btn btn-primary btn-lg">
    Accept & Download PDF
  </button>
</div>
</main>



<!-- ============================================================ -->
<!--  LOADING overlay                                             -->
<!-- ============================================================ -->
<div id="loadingOverlay"
     class="position-fixed top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center bg-white bg-opacity-75 d-none"
     style="z-index:2000;">
  <div class="spinner-border text-primary" role="status" style="width:3rem;height:3rem;"></div>
  <p class="mt-3 fw-semibold">Processing&nbsp;PDF…</p>
  <p id="loadingPhrase" class="mt-2 text-muted" style="opacity: 0; transition: opacity 0.5s ease;"></p>
</div>

<!-- ============================================================ -->
<!--  FOOTER                                                      -->
<!-- ============================================================ -->
<footer class="mt-auto bg-white border-top small py-2 text-muted">
  <div class="container-fluid d-flex justify-content-between">
    <span>© Elite Conveyancing 2025</span>
    <span>Your PDF Assistant</span>
  </div>
</footer>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="app.js"></script>
</body>
</html>
